<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>/src/main/resources/static/login2.html</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js" integrity="sha512-a+SUDuwNzXDvz4XrIcXHuCf089/iJAoN4lmrXJg18XnduKK6YlDHNRalv4yd1N40OKI80tFidF+rqTFKGPoWFQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
<!-- http://localhost:8080/login.html -->
<script>
// 암호화 함수
function encryptPassword(password) {
	// 암호화 키 (자주 변경하지 않도록 주의/위의 코드에서 key를 인증을 통해 가져오는 방법)
   const key = "abcdkey";  
   const encrypted = CryptoJS.AES.encrypt(password, key).toString();
   return encrypted;
}

// 비밀번호 암호화
//const encryptedPassword = encryptPassword('1234');
//console.log("암호화된 비밀번호: ", encryptedPassword);

function encodeToBase64() {
	const inputString = document.getElementById("password").value;
	console.log("입력폼에 값:"+inputString);
	//비대칭 암호화 알고리즘으로 암호화
	const encryptedPassword = encryptPassword(inputString);
	console.log("비대칭 암호화:"+encryptedPassword);
	//base64로 암호화한 코드를 엔코딩
	var encodedString = btoa(encryptedPassword); // JavaScript의 base64 인코딩
	document.getElementById("password").value = encodedString;
	console.log("비대칭+base64 암호화:"+encodedString);
	//return false;
}
	
</script>
    
<form action="/login2" method="post" onsubmit="return encodeToBase64()">
<p>아 이 디 <input type="text" name="username"><p>
<p>비밀번호<input type="password" name="password" id="password"><p>
<p><input type="submit" value="로그인"><p>
</form>
</body>
</html>